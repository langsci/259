% add all extra packages you need to load to this file 

% the ISBN assigned to the digital edition
\usepackage[ISBN=9783961102556]{ean13isbn} 

\usepackage{graphicx}
\usepackage{tabularx}
\usepackage{amsmath} 

%\usepackage{tipa}      % Davis Koenig
\usepackage{xunicode} % Provide tipa macros (BC)

\usepackage{multicol}

% Berthold morphology
\usepackage{relsize}
%\usepackage{./styles/rtrees-bc} % forbidden forest 08.12.2019

% provides logo priniting commands
\usepackage{langsci-basic}

\usepackage{langsci-optional} 
% used to be in this package
\providecommand{\citegen}{}
\renewcommand{\citegen}[2][]{\citeauthor{#2}'s (\citeyear*[#1]{#2})}
\providecommand{\lsptoprule}{}
\renewcommand{\lsptoprule}{\midrule\toprule}
\providecommand{\lspbottomrule}{}
\renewcommand{\lspbottomrule}{\bottomrule\midrule}
\providecommand{\largerpage}{}
\renewcommand{\largerpage}[1][1]{\enlargethispage{#1\baselineskip}}

\usepackage{./styles/biblatex-series-number-checks}


\usepackage{langsci-lgr}

\newcommand{\MAS}{\textsc{m}\xspace} % \M is taken by somebody

% needed for texlive 2021
% put langsci-lgr into the local directory St. Mü. 03.04.2021
%\newcommand{\F}{\textsc{f}{}\xspace}
%\newcommand{\N}{\textsc{n}{}\xspace}


%\usepackage{./styles/forest/forest}
\usepackage{langsci-forest-setup}

% To center and ignore the bar at the node in trees. I use the \rlap directly to avoid confusion
% with the AVM \1.
%\newcommand\1{\rlap{$'$}}

% is loaded in main etc.
% \usepackage{nomemoize} 
% \memoizeset{
%   memo filename prefix={chapters/hpsg-handbook.memo.dir/},
%   register=\todo{O{}+m},
%   prevent=\todo,
% }

\usepackage{tikz-cd}

\usepackage{./styles/tikz-grid}
\usetikzlibrary{shadows}


% removed with texlive 2020 06.05.2020
% %\usepackage{pgfplots} % for data/theory figure in minimalism.tex
% % fix some issue with Mod https://tex.stackexchange.com/a/330076
% \makeatletter
% \let\pgfmathModX=\pgfmathMod@
% \usepackage{pgfplots}%
% \let\pgfmathMod@=\pgfmathModX
% \makeatother

\usepackage{subcaption}

% Stefan Müller's styles
\usepackage{./styles/merkmalstruktur,./styles/makros.2020,./styles/my-xspace,./styles/article-ex,
./styles/eng-date}

\usepackage{varioref}
\newcommand\refORregion[2]{%
 \vrefpagenum\firstnum{#1}%
 \vrefpagenum\secondnum{#2}%
\ifthenelse{\equal\firstnum\secondnum}%
{\pageref{#1}}%
{\pageref{#1}--\pageref{#2}}%
}

% I am sick of fiddeling arround with babel. I want these shorthands also to work in commands I
% define. St.Mü. 13.08.2020
% e.g. with \iwithini
\usepackage{german}
\selectlanguage{USenglish}

\usepackage{./styles/abbrev}


% Has to be loaded late since otherwise footnotes will not work

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%                                              %%%
%%%           Examples                           %%%
%%%                                              %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% remove the percentage signs in the following lines
% if your book makes use of linguistic examples
\usepackage{langsci-gb4e} 



% This introduces labels which makes hyperlinks work so that proofreading is easier.
%\makeatletter
%\newcommand{\mex}[1]{\ref{ex-\the\c@chapter-\the\numexpr\c@equation+#1}\relax}
%\newcommand{\eaautolabel}{\label{ex-\the\c@chapter-\the\numexpr\c@equation+1}}
%\makeatother

%\let\oldea\ea
%\def\ea{\oldea\eaautolabel}

%\let\oldeal\eal
%\def\eal{\oldeal\eaautolabel}


% Crossing out text
% uncomment when needed
%\usepackage{ulem}

\usepackage{./styles/additional-langsci-index-shortcuts}

% this is the completely redone avm package
\usepackage{langsci-avm}
\avmsetup{columnsep=.3ex,style=narrow}

% Felix suggeted using narrow, but this was for oneliners. In general narrow seems to be not good.
% St.Mü. 15.06.2021
%\avmsetup{columnsep=.3ex}

\avmdefinecommand{phon}[phon]
  {
    attributes  = \itshape%,
%    delimfactor = 900,
%    delimfall   = 10pt
}

\avmdefinecommand{form}[form]
  {
    attributes  = \itshape%,
%    delimfactor = 900,
%    delimfall   = 10pt
}

% \set was already taken
\avmdefinecommand{avmset}[set]{ attributes=\itshape } % define a new \set command
\avmdefinecommand{list}[list]{ attributes=\itshape } % define a new \list command
   % Note: the label "list" will be output in whatever font is currently active.

\newcommand{\listOf}[1]{\upshape\textit{list}(\textit{#1})}
\newcommand{\nelistOf}[1]{\upshape\textit{nelist}(\textit{#1})}
\newcommand{\setOf}[1]{\upshape\textit{set}(\textit{#1})}
\newcommand{\posetOf}[1]{\upshape\textit{poset}(\textit{#1})}

% \avm{
% 	[subj  & \1 \\
% 	comps & \2 \- \list*(gap-ss) \\ % Produce a \list
% 	deps  & < \1 > \+ \2
% 	]
% }


\avmdefinecommand{nelist}[ne-list]{ attributes=\itshape } % define a new \nelist command
   % Note: the label "ne-list" will be output in whatever font is currently active.

\newcommand{\uplusAVM}{\unskip\hbox{${}\uplus{}$}\ignorespaces}
% This is \-
%\newcommand{\ominusAVM}{\unskip\hbox{${}\ominus{}$}\ignorespaces}
\newcommand{\cupAVM}{\unskip\hbox{${}\cup{}$}\ignorespaces}


% https://github.com/langsci/langsci-avm/issues/33#issuecomment-671201576
%\avmsetup{extraskip=0pt}

% if you have to use both langsci-avm and avm
% \usepackage{langsci-avm} % Load pkg with meaning A of conflicting cmd
% \let\lavm\avm % Send the conflicting command to an alternative
% \let\avm\undefined % Send the conflicting cmd to be \undefined
% \usepackage{avm} % Load pkg with meaning B for conf. cmd 

%\let\asort\type*

% remove this, once we really do without avm
%\usepackage{./styles/avm+}

% copied over from avm+.sty
% some relation operators:
%\newcommand{\append}[0]{\ensuremath{\oplus\hspace{.24em}}}
%\newcommand{\shuffle}[0]{\ensuremath{\bigcirc\hspace{.24em}}}

\newcommand{\append}[0]{\ensuremath{\oplus}\xspace}
\newcommand{\shuffle}[0]{\ensuremath{\bigcirc}\xspace}


% command to fontify relations in avms 
\newcommand{\rel}[1]{\texttt{#1}}
%\def\relfont{\slshape}%
%\def\relfont{\ttdefault}%

\newcommand{\phonfont}[1]{\normalfont\textit{#1}}


\let\idx\ibox
\let\avmbox\ibox

% command to fontify attributes in ordinary text
\newcommand{\attrib}[1]{\textsc{#1}}


% some relation operators:
%\newcommand{\append}[0]{\ensuremath{\oplus\hspace{.24em}}}
%\newcommand{\shuffle}[0]{\ensuremath{\bigcirc\hspace{.24em}}}

\def\relfont{\upshape\slshape}%
%
% command to fontify relations in avms 
%\newcommand{\rel}[1]{{\relfont #1}}



% \renewcommand{\tpv}[1]{{\avmjvalfont\itshape #1}}

% % no small caps please
% \renewcommand{\phonshape}[0]{\normalfont\itshape}

% \regAvmFonts

\usepackage{theorem}

\newtheorem{mydefinition}{Def.}
\newtheorem{principle}{Principle}

{\theoremstyle{break}
%\newtheorem{schema}{Schema}
\newtheorem{mydefinition-break}[mydefinition]{Def.}
\newtheorem{principle-break}[principle]{Principle}
}


%% \newcommand{schema}[2]{
%% \begin{minipage}{\textwidth}
%% {\textbf{Schema~\theschema}}]\hspace{.5em}\textbf{(#1)}\\
%% #2
%% \end{minipage}}


% This avoids linebreaks in the Schema
\newcounter{schemacounter}
\makeatletter
\newenvironment{schema}[1][]
  {%
   \refstepcounter{schemacounter}%
   \par\bigskip\noindent
   \minipage{\linewidth}%
   \textbf{Schema~\theschemacounter\hspace{.5em} \ifx&#1&\else(#1)\fi}\par
  }{\endminipage\par\bigskip\@endparenv}%
\makeatother

%\usepackage{subfig}





% Davis Koenig Lexikon

%\usepackage{tikz-qtree,tikz-qtree-compat} % Davis Koenig remove
%\usepackage{shadow}

% arg-st
\usetikzlibrary{arrows.meta}


\usepackage[english]{isodate} % Andy Lücking
\usepackage[autostyle]{csquotes} % Andy
%\usepackage[autolanguage]{numprint}

%\defaultfontfeatures{
%    Path = /usr/local/texlive/2017/texmf-dist/fonts/opentype/public/fontawesome/ }

%% https://tex.stackexchange.com/a/316948/18561
%\defaultfontfeatures{Extension = .otf}% adds .otf to end of path when font loaded without ext parameter e.g. \newfontfamily{\FA}{FontAwesome} > \newfontfamily{\FA}{FontAwesome.otf}
%\usepackage{fontawesome} % Andy Lücking
\usepackage{pifont} % Andy Lücking -> hand

\usetikzlibrary{decorations.pathreplacing} % Andy Lücking
\usetikzlibrary{matrix} % Andy 
\usetikzlibrary{positioning} % Andy
\usepackage{tikz-3dplot} % Andy

% pragmatics
\usepackage{eqparbox} % Andy
\usepackage{enumitem} % Andy
\usepackage{longtable} % Andy
% \usepackage{tabu} % Andy, replaced by \lueckingbox from locacommands,              needs to be loaded before hyperref as of texlive 2020

% tabu-fix
% to make "spread 0pt" work
% -----------------------------
\RequirePackage{etoolbox}
\makeatletter
\patchcmd
	\tabu@startpboxmeasure
	{\bgroup\begin{varwidth}}%
	{\bgroup
	 \iftabu@spread\color@begingroup\fi\begin{varwidth}}%
	{}{}
\def\@tabarray{\m@th\def\tabu@currentgrouptype
    {\currentgrouptype}\@ifnextchar[\@array{\@array[c]}}
%
%%% \pdfelapsedtime bug 2019-12-15
\patchcmd
	\tabu@message@etime
	{\the\pdfelapsedtime}%
	{\pdfelapsedtime}%
	{}{}
%
%
\makeatother
% -----------------------------


% Manfred's packages

%\usepackage{shadow}

%\usepackage{tabularx} already loaded above
\newcolumntype{L}[1]{>{\raggedright\arraybackslash}p{#1}} % linksbündig mit Breitenangabe


% Jong-Bok


% seems evil, get rid of it
% defines \ex is incompatible with gb4e
%\usepackage{lingmacros}

% taken from lingmacros:
\makeatletter
% \evnup is used to line up the enumsentence number and an entry along
% the top.  It can take an argument to improve lining up.
\def\evnup{\@ifnextchar[{\@evnup}{\@evnup[0pt]}}

\def\@evnup[#1]#2{\setbox1=\hbox{#2}%
\dimen1=\ht1 \advance\dimen1 by -.5\baselineskip%
\advance\dimen1 by -#1%
\leavevmode\lower\dimen1\box1}
\makeatother


% YK -- CG chapter

%\usepackage{xspace}
\usepackage{bm}
\usepackage{ebproof}


% Antonio Branco, remove this
\usepackage{epsfig}

% now unicode
%\usepackage{alphabeta}





\usepackage{pst-node}


% fmr: additional packages
%\usepackage{amsthm}


% Ash and Steve: LFG
\usepackage{./styles/lfg/dalrymple}

\RequirePackage{graphics}
%\RequirePackage{./styles/lfg/trees}
%% \RequirePackage{avm}
%% \avmoptions{active}
%% \avmfont{\sc}
%% \avmvalfont{\sc}
\RequirePackage{./styles/lfg/lfgmacrosash}

\usepackage{./styles/lfg/glue}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Markup
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[normalem]{ulem} % For thinks like strikethrough, using \sout

% \newcommand{\high}[1]{\textbf{#1}} % highlighted text
\newcommand{\high}[1]{\textit{#1}} % highlighted text
%\newcommand{\term}[1]{\textit{#1}\/} % technical term
\newcommand{\qterm}[1]{``{#1}''} % technical term, quotes
%\newcommand{\trns}[1]{\strut `#1'} % translation in glossed example
\newcommand{\trnss}[1]{\strut \phantom{\sqz{}} `#1'} % translation in ungrammatical glossed example
\newcommand{\ttrns}[1]{(`#1')} % an in-text translation of a word
\newcommand{\LFGfeat}[1]{\mbox{\textsc{\MakeLowercase{#1}}}}     % feature name
%\newcommand{\val}[1]{\mbox{\textsc{\MakeLowercase{#1}}}}    % f-structure value
\newcommand{\featt}[1]{\mbox{\textsc{\MakeLowercase{#1}}}}     % feature name
\newcommand{\vall}[1]{\mbox{\textsc{\textup{\MakeLowercase{#1}}}}}    % f-structure value
\newcommand{\mg}[1]{\mbox{\textsc{\MakeLowercase{#1}}}}    % morphological gloss
%\newcommand{\word}[1]{\textit{#1}}       % mention of word
\providecommand{\kstar}[1]{{#1}\ensuremath{^*}}
\providecommand{\kplus}[1]{{#1}\ensuremath{^+}}
\newcommand{\template}[1]{@\textsc{\MakeLowercase{#1}}}
\newcommand{\templaten}[1]{\textsc{\MakeLowercase{#1}}}
\newcommand{\templatenn}[1]{\MakeUppercase{#1}}
\newcommand{\tempeq}{\ensuremath{=}}
\newcommand{\predval}[1]{\ensuremath{\langle}\textsc{#1}\ensuremath{\rangle}}
\newcommand{\predvall}[1]{{\rm `#1'}}
\newcommand{\lfgfst}[1]{\ensuremath{#1\,}}
\newcommand{\scare}[1]{``#1''} % scare quotes
\newcommand{\bracket}[1]{\ensuremath{\left\langle\mathit{#1}\right\rangle}}
\newcommand{\sectionw}[1][]{Section#1} % section word: for cap/non-cap
\newcommand{\tablew}[1][]{Table#1} % table word: for cap/non-cap
\newcommand{\lfgglue}{LFG+Glue}
\newcommand{\hpsgglue}{HPSG+Glue}
\newcommand{\gs}{GS}
%\newcommand{\func}[1]{\ensuremath{\mathbf{#1}}}
\newcommand{\func}[1]{\textbf{#1}}
\renewcommand{\glue}{Glue}
%\newcommand{\exr}[1]{(\ref{ex:#1}}
\newcommand{\exra}[1]{(\ref{ex:#1})}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Notation
%\newcommand{\xbar}[1]{$_{\mbox{\textsc{#1}$^{\raisebox{1ex}{}}$}}$}
\newcommand{\xprime}[2][]{\textup{\mbox{{#2}\ensuremath{^\prime_{\hspace*{-.0em}\mbox{\footnotesize\ensuremath{\mathit{#1}}}}}}}}
\providecommand{\xzero}[2][]{#2\ensuremath{^0_{\mbox{\footnotesize\ensuremath{\mathit{#1}}}}}}



\let\leftangle\langle
\let\rightangle\rangle

%\newcommand{\pslabel}[1]{}

% remove when finished
\usepackage{proofread}


% to correct indentation in LFG chapter
\usepackage{enumitem}


%\usepackage{mathtools}
